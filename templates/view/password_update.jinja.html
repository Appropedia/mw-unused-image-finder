{% from 'macros/top_bar.jinja.html' import top_bar %}
<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> Password update </title>
    <link rel="stylesheet" type="text/css" href="{{url_for('static', filename = 'common.css')}}">
  </head>
  <body>
{% if g.user_status != 'new_pass' %}
    {{top_bar('Back to main', 'default.view') | indent(4)}}
{% else %}
    {{top_bar() | indent(4)}}
{% endif %}
{% if g.user_status == 'new_pass' %}
    <p> You have accessed your account using an auto-generated password. Please update it now. </p>
{% else %}
    <p> You can change your password here. </p>
{% endif %}
    <form action="{{url_for('password_update.view')}}" method="post">
      <div>
        <label for="current_password">Current password:</label>
        <input type="password" id="current_password" name="current_password" required>
      </div>
      <div>
        <label for="new_password">New password:</label>
        <input type="password" id="new_password" name="new_password" required>
      </div>
      <div>
        <label for="confirmed_password">Confirm password:</label>
        <input type="password" id="confirmed_password" name="confirmed_password" required>
      </div>
      <div>
        <button type="submit">Update</button>
      </div>
{% for message in get_flashed_messages() %}
      <div style="color: red;">{{message}}</div>
{% endfor %}
    </form>
  </body>
</html>
